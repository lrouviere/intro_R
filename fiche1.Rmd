---
title: 'Fiche 1 : Environnement RStudio, Rmarkdown et packages'
output: html_notebook
---

**R** est un logiciel libre et gratuit principalement dédié aux analyses statistiques et aux représentations graphiques. Il est gratuit et librement distribué par le **CRAN** (Comprehensive R Archive Network) à l'adresse suivante : [https://www.r-project.org](https://www.r-project.org). 

L'installation varie d'un système d'exploitation à l'autre (Windows, Mac OS, Linux) mais elle est relativement simple, il suffit de suivre les instructions.


**RStudio** est une interface facilitant l'utilisation de **R**. Elle est également gratuite et librement distribuée à l'adresse [https://www.rstudio.com](https://www.rstudio.com). 

L'interface **RStudio** est divisée en 4 fenêtres :

* *Console* où on peut entrer et exécuter des commandes (taper 1+2)
* *Environnement, History* où on peut visualiser les objets construits (taper a <- 1+2 dans la console)
* *Files, Plots...* où on peut visualiser les répertoires et fichiers de l'espace de travail, les graphiques, intaller des packages...
* *R script* où on conserve les lignes de commandes ainsi que les commentaires sur le travail effectué. Il faut penser à sauvegarder régulièrement ce fichier.

## R Script

Il existe différentes façons de travailler sur RStudio. De façon classique, on peut

* ouvrir un **script**.
* entrer les commandes dans le script.
* regarder les sorties dans la console (en cliquant sur le bouton **run**).
* sauver le script.

## Notebook et Rmarkdown

Récemment (il y a 3-4 ans), un notebook a été développé pour produire des rapports de bonne qualité à différents formats, notamment du pdf, html ou rtf. Un notebook R est un document  R Markdown qui contient des **chunks** (dans lesquels on met du code R) qui peuvent être executés de façon indépendante et interactive. La sortie est visible sous le chunk executé. On peut créer un notebook dans RStudio avec le menu *File -> New File -> R Notebook*. Les codes R se trouvent dans les chunks que l'on produit à l'aide du bouton*Insert -> R* ou avec le raccourci clavier *Ctrl + Alt + I*.

La [cheat Sheet R markwdown](https://www.rstudio.com/wp-content/uploads/2016/03/rmarkdown-cheatsheet-2.0.pdf) décrit la syntaxe Markdwon pour faire des notebook : tableaux, graphes, équation latex (si *latex* est installé sur la machine)...
$$\int f(x)\ dx=1$$
Quelques exemples sur la syntaxe **Rmarkdown** :

* *italique* et **gras**
* liste non ordonnées:
    - item 1
    - item 2
* list ordonnée :
    1. item 1
    2. item 2
* tableau :

| Col1 | Col2 | Col3 |
|------|------|------|
Row1 | 1 | 2| 3 |
Row2 | 1 | 2| 3 |

Le **code R** doit être installé dans des **chunks**. On peut insérer des chunks avec :

* la raccourci clavier **Ctrl + Alt + I** (OS X: Cmd + Option + I)
* la bouton **Insert -> R**
* en tapant :


```` markdown
`r ''````{r}
commandes...
```
````

On clique sur *"Preview"* pour visualiser la sortie au format **html**.


### Exercice

1. Ouvrir un notebook (*File -> New File -> R Notebook*)
2. Créer une section **Cosinus**
3. Tracer la fonction cosinus : on utilisera la code suivant dans un **chunk**.


```{r,echo=TRUE,eval=FALSE}
x <- seq(-2*pi,2*pi,by=0.01)
y <- cos(x)
plot(x,y,type="l")
```

4. Executer le chunk (en cliquant sur le traingle vert).
5. Cliquer sur le bouton *Preview*.
6. Ajouter une seconde section **Sinus** où vous tracerez la fonction sinus.

## Diaporama R

**Rstudio** propose aussi différents environnements pour construire des **diaporamas**. On pourra utiliser le menu *File -> New File -> R Markdown -> Presentation*, puis sélectionner le format *ioslides* ou *slidy*.  On utilisera la même syntaxe que pour les notebook (langage Rmarkdown). Les slides sont séparés par le symbole  ## et les codes R sont toujours insérés dans des chunks.

### Exercice

Créer 2 diapositives :

1. Titre: **Cosinus** où on tracera la fonction cosinus.
2. Titre: **Sinus** où on tracera la fonction sinus.

## Packages

Un package est une ensemble de programmes et fonctions **R** qui complètent les fonctions existantes par défaut dans le logiciel. Un package est généralement dédié à une méthode ou un champ d'application spécifique. Il existe plus de 13 000 packages disponibles sur le **CRAN**  [https://cran.r-project.org](https://cran.r-project.org). On installe un package en

* utilisant le fonction **install.packages** dans la console.
ou
* ou cliquant sur le bouton *Packages*.

Une fois le package installé sur la machine, on l'installe avec la fonction **library** :

```{r, eval=FALSE, include=TRUE}
install.packages(package.name)
library(packages.name)
```


### Exercice

1. Executer

```{r,eval=FALSE,include=TRUE}
iris %>% summarize(mean_Petal=mean(Petal.Length))
```

Que se passe t-il ?

2. Installer et charger le  package **tidyverse** et ré-executer le code précédent.

```{r,eval=FALSE,include=TRUE}
install.packages("tidyverse")
```


```{r}
library(tidyverse)
iris %>% summarize(mean_Petal=mean(Petal.Length))
```

## Environnement projet

Afin de faciliter la gestion de l'arborescence de l'environnement de travail, il est souvent recommandé de travailler en **projet**. Cet environnement permet d'afficher tous les fichiers du projet dans le même répertoire, ce répertoire étant par défaut considérer comme environnement de travail. On peut définir un **projet** à l'aide du menu **File --> New Project...**. Nous recommandons d'utiliser cet environnement par la suite.




